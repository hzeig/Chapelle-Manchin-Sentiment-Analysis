dc_vd_titl <- read_rds('dcvader.titles.rds')
dc_vd_post <- read_rds('dcvader.threads.rds')
dc_vd_comm <- read_rds('dcvader.comments.rds')
dc_vd_titl <- read_rds('dcvader.titles.rds')
dc_vd_post <- read_rds('dcvader.threads.rds')
saveRDS(dc_vd_thre, "dcvader.posts.rds")
dc_vd_post <- read_rds('dcvader.posts.rds')
dc_vd_titl <- dc_vd_titl %>%  as_tibble()
dc_vd_post <- dc_vd_thre %>%  as_tibble()
dc_vd_comm <- dc_vd_comm %>%  as_tibble()
dc_vd_titl <- dc_vd_titl %>%  select(title = text,
title.compound = compound,
title.pos = pos,
title.neu = neu,
title.neg = neg)
dc_vd_post <- dc_vd_post %>%  select(post = text,
post.compound = compound,
post.pos = pos,
post.neu = neu,
post.neg = neg)
dc_vd_comm <- dc_vd_comm %>%  select(commment = text,
comm.compound = compound,
comm.pos = pos,
comm.neu = neu,
comm.neg = neg)
vd_df <- merge(dc_full, dc_vd_titl)
vd_df <- merge(vd_df, dc_vd_post)
vd_df <- merge(vd_df, dc_vd_comm)
View(dc_vd_comm)
vd_df_comm <- merge(dc_full, dc_vd_comm)
View(vd_df)
vd_df <- merge(vd_df, dc_vd_post)
write.csv(dc_vd_titl, "dcvader.titles.rds", row.names = F)
write.csv(dc_vd_thre, "dcvader.posts.rds", row.names = F)
write.csv(dc_vd_comm,"dcvader.comments.rds", row.names = F)
dc_vd_titl2 <- read_csv('dcvader.titles.rds')
dc_vd_post2 <- read_csv('dcvader.posts.rds')
dc_vd_comm2 <- read_csv('dcvader.comments.rds')
write.csv(dc_vd_titl, "dcvader.titles.csv", row.names = F)
write.csv(dc_vd_thre, "dcvader.posts.csv", row.names = F)
write.csv(dc_vd_comm,"dcvader.comments.csv", row.names = F)
dc_vd_titl2 <- read_csv('dcvader.titles.csv')
dc_vd_post2 <- read_csv('dcvader.posts.csv')
dc_vd_comm2 <- read_csv('dcvader.comments.csv')
dc_vd_titl <- dc_full %>% group_by(title) %>% vader_df(title)
dc_vd_thre <- dc_full %>% group_by(post) %>% vader_df(post)
dc_vd_comm <- dc_full %>% vader_df(comment)
write.csv(dc_vd_titl, "dcvader.titles.csv", row.names = F)
write.csv(dc_vd_thre, "dcvader.posts.csv", row.names = F)
write.csv(dc_vd_comm,"dcvader.comments.csv", row.names = F)
dc_vd_titl2 <- dc_vd_titl2 %>%  select(title = text,
title.compound = compound,
title.pos = pos,
title.neu = neu,
title.neg = neg)
View(dc_vd_titl2)
vd_df2 <- merge(dc_full, dc_vd_titl2)
problems()
?problems
vd_df2 <- merge(dc_full, dc_vd_titl2)
View(vd_df2)
View(vd_df2)
vd_df2 <- merge(vd_df2, dc_vd_post)
View(dc_vd_post2)
dc_vd_post2 <- read_csv('dcvader.posts.csv')
View(dc_vd_thre)
dc_vd_thre <- dc_full %>% group_by(post) %>% vader_df(post)
dc_full %>% group_by(post) %>% summarise(post)
dc_full %>% group_by(post)
dc_full %>% group_by(post) %>% summarise(post)
dc_full %>% group_by(post) %>% summarise(rep_post = median(post))
dc_vd_thre <- dc_full %>% group_by(post) %>% vader_df(unique(post))
dc_full %>% group_by(post) %>% sunique(post)
dc_full %>% group_by(post)
dc_full %>% group_by(post) %>% unique(post)
dc_vd_post <- dc_full %>% group_by(post) %>% vader_df(post)
View(dc_vd_titl)
View(dc_full)
warnings()
# import DFs
jm_comm <- read.csv("jmcomments.csv")
jm_thre <- read.csv("jmthreads.csv")
# import DFs
jm_comm <- read.csv("jmcomments.csv")
jm_thre <- read.csv("jmthreads.csv")
# merge into one DF
jm_thre <- jm_thre %>% dplyr::select(subreddit, url, thread.author=author,
thread.date=date, thread.title=title,
thread.text=text,
thread.score=score,
thread.number.comments=comments)
jm_comm <- jm_comm %>% dplyr::select(url, comment.author=author,
comment.date=date, comment,
comment.score=score, comment_id)
jm_full <- merge(jm_thre, jm_comm)
# import DFs
jm_comm <- read.csv("jmcomments.csv")
jm_thre <- read.csv("jmthreads.csv")
# merge into one DF
jm_thre <- jm_thre %>% dplyr::select(subreddit, url, thread.author=author,
thread.date=date, thread.title=title,
post=text,
thread.score=score,
thread.number.comments=comments)
jm_comm <- jm_comm %>% dplyr::select(url, comment.author=author,
comment.date=date, comment,
comment.score=score, comment_id)
jm_full <- merge(jm_thre, jm_comm)
jm_vd_titl <- vader_df(jm_thre$title)
jm_vd_post <- vader_df(jm_thre$text)
jm_vd_comm <- vader_df(jm_comm$comment)
jm_vd_titl <- vader_df(jm_full$title)
jm_vd_post <- vader_df(jm_full$text)
jm_vd_post <- vader_df(jm_full$post)
runApp('shiny_app')
install.packages("wordcloud2")
runApp('shiny_app')
View(jm_thre)
write.csv(jm_vd_titl, "jmvader.titles.csv", row.names = F)
write.csv(jm_vd_post,"jmvader.posts.csv", row.names = F)
write.csv(jm_vd_comm,"jmvader.comments.csv", row.names = F)
jm_vd_titl <- read.csv('jmvader.titles.csv')
jm_vd_post <- read.csv('jmvader.posts.csv')
jm_vd_comm <- read.csv('jmvader.comments.csv')
View(jm_vd_post)
count(is.na(jm_vd_titl))
sum(is.na(jm_vd_titl))
sum(is.na(jm_vd_post))
sum(is.na(jm_vd_post$text))
sum(is.na(jm_vd_post))
sum(is.na(jm_vd_post$word_scores))
sum(is.na(jm_vd_post$compound))
sum(is.na(jm_vd_post$neu))
View(jm_full)
# merge into one DF
jm_thre <- jm_thre %>% dplyr::select(subreddit, url, thread.author=author,
thread.date=date, title,
post=text,
thread.score=score,
thread.number.comments=comments)
jm_thre <- read.csv("jmthreads.csv")
# merge into one DF
jm_thre <- jm_thre %>% dplyr::select(subreddit, url, thread.author=author,
thread.date=date, title,
post=text,
thread.score=score,
thread.number.comments=comments)
jm_vd_titl <- vader_df(jm_full$title)
jm_full <- merge(jm_thre, jm_comm)
jm_vd_titl <- vader_df(jm_full$title)
sum(is.na(jm_vd_post$neu))
sum(is.na(jm_vd_comm$neu))
sum(is.na(jm_vd_titl$neu))
library(shiny)
getwd()
anti_join(jm_vd_titl, stop_words, by = "word")
anti_join(jm_vd_titl, stop_words, by = c("title"="word"))
anti_join(jm_vd_titl, stop_words, by = c("word"="title"))
anti_join(jm_vd_titl, stop_words, by = c("title"="title"))
anti_join(jm_vd_titl, stop_words, by = jm_vd_title$title)
anti_join(jm_vd_titl, stop_words, by = jm_vd_titl$title)
jm_vd_titl %>%anti_join(stop_words, by = "title")
df1 <- data.frame(id = paste0("person", 1:3),
a = c("a", "b", "c"),
b = c(1, 3, 4),
c = c("f", "e", "d"),
row.names = paste0("rn", 1:3),
stringsAsFactors = FALSE)
df2 <- data.frame(id = paste0("person", 3:1),
a = c("c", "b", "a"),
b = c(1, 3, 4),
d = paste0("rn", 1:3),
row.names = paste0("rn", c(1,3,2)),
stringsAsFactors = FALSE)
View(df1)
View(df2)
# 1.1 by thread text
dc_sr_thre <- get_sentences(dc_thre$thread.text)
dc_sr_thre_sent <- sentiment_by(dc_sr_thre, dc_thre$thread.text)
# import DFs
dc_comm <- read.csv("dccomments.csv")
dc_thre <- read.csv("dcthreads.csv")
# merge into one DF
dc_thre <- dc_thre %>% dplyr::select(subreddit, url, thread.author=author,
thread.date=date, title,
post=text,
thread.score=score,
thread.number.comments=comments)
dc_comm <- dc_comm %>% dplyr::select(url, comment.author=author,
comment.date=date, comment,
comment.score=score, comment_id)
dc_full <- merge(dc_thre, dc_comm)
# 1.1 by thread text
dc_sr_thre <- get_sentences(dc_thre$thread.text)
dc_sr_thre_sent <- sentiment_by(dc_sr_thre, dc_thre$thread.text)
# summary
summary(dc_sr_thre_sent)
# correlations
df1 <- merge(dc_sr_thre_sent, dc_thre)
cor(df1$thread.score, df1$thread.number.comments) # 0.781
cor(df1$ave_sentiment, df1$word_count) # -0.287
cor(df1$ave_sentiment, df1$thread.score) # 0.156
cor(df1$ave_sentiment, df1$thread.number.comments) # 0.057
View(dc_full)
View(dc_full)
dc_vd_titl2 <- read_csv('dcvader.titles.csv')
dc_vd_post2 <- read_csv('dcvader.posts.csv')
dc_vd_comm2 <- read_csv('dcvader.comments.csv')
dc_vd_titl3 <- read_rds('dcvader.titles.rds')
dc_vd_post3 <- read_rds('dcvader.posts.rds')
dc_vd_comm3 <- read_rds('dcvader.comments.rds')
p1 <- ggplot(data = jm_vd_comm, aes(x=pos))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple") +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=pos))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=jm_vd_title, fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop.na(jm_vd_title), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
library(sentimentr)
library(vader)
library(lubridate)
library(ggplot2)
library(scales)
library(reshape2)
library(dplyr)
library(tidyverse)
library(stringr)
# rm(list=ls())
legend("topleft",
c('title text','post text','comments'),
col = 1:3,
lty = 1,
title = "Text Colors")
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop.na(jm_vd_title), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_title), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
p1 <- ggplot(data = jm_vd_comm, aes(x=neg, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
p1
View(dc_vd_comm2)
ggplot(data = jm_vd_comm, aes(x=compound, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
ggplot(data = jm_vd_comm, aes(x=neg, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
ggplot(data = jm_vd_comm, aes(x=pos, fill='yellow',alpha=.5))+
geom_density() +
# Change the fill colour to differentiate it
geom_density(data=jm_vd_post, fill="purple", alpha = .3) +
geom_density(data=drop_na(jm_vd_titl), fill="green", alpha = .3) +
labs(title = "Distribution of positivity")+
labs(y="Density")+
labs(x="positive response")
View(jm_thre)
jm_date <- jm_thre %>% select(date,title,post)
jm_date <- jm_thre %>% select(date=thread.date,title,post)
View(jm_vd_titl)
jm_vd_title_s <- jm_vd_titl %>% select (title=text, pos, neg)
jm_vd_date <- merge(jm_date, jm_vd_title_s)
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
theme_ipsum() +
theme(axis.text.x=element_text(angle=60, hjust=1))
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
View(jm_vd_date)
jm_vd_date <- merge(jm_date, distinct(jm_vd_title_s))
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
View(jm_vd_date)
View(jm_vd_comm)
View(jm_vd_titl)
View(jm_vd_post)
View(jm_vd_post)
is.na(distinct(jm_vd_post))
sum(is.na(distinct(jm_vd_post)))
distinct(jm_vd_post)
j <- distinct(jm_vd_post)
View(j)
p <- ggplot(data = jm_vd_date, aes(x=date, y=mean(pos)) +
p <- ggplot(data = jm_vd_date, aes(x=date, y=mean(pos))) +
geom_line( color="#69b3a2") +
xlab("date") +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_date, aes(x=date, y=mean(pos))) +
geom_line( color="#69b3a2") +
xlab("date")
p
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
jm_vd_date$date <- ymd(jm_vd_date$date)
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos)) +
geom_line( color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
# import DFs
dc_comm <- read.csv("dccomments.csv")
dc_thre <- read.csv("dcthreads.csv")
View(dc_comm)
# import DFs
dc_comm <- read.csv("dccomments.csv")
# merge into one DF
dc_thre <- dc_thre %>% dplyr::select(url, subreddit, title,
post=text, thread.score=score)
dc_comm <- dc_comm %>% dplyr::select(url, date, comment,
comment.score=score)
dc_full <- merge(dc_thre, dc_comm)
View(dc_full)
# import DFs
dc_comm <- read.csv("dccomments.csv")
dc_thre <- read.csv("dcthreads.csv")
# merge into one DF
dc_thre <- dc_thre %>% dplyr::select(url, subreddit,
thread.date=date,
title, post=text,
thread.score=score)
dc_comm <- dc_comm %>% dplyr::select(url, comment.date=date,
comment, comment.score=score)
dc_full <- merge(dc_thre, dc_comm)
View(dc_full)
jm_vd_post_s <- jm_vd_post %>% select(post=text,pos,neg)
jm_vd_datepost <- merge(jm_date, distinct(jm_vd_post_s))
jm_vd_datepost$date <- ymd(jm_vd_datepost$date)
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos)) +
geom_line( color="purple") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos)) +
geom_line( color="purple") +
geom_line( color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos)) +
geom_line( color="purple") +
geom_line(jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, color="purple")) +
geom_line() +
geom_line(date = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, color="purple")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, color="blue")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, fill="blue")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, fill="blue")) +
geom_line() +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
color
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, color="blue")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, fill="blue")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_datepost, aes(x=date, y=pos, fill="purple")) +
geom_line() +
geom_line(data = jm_vd_date, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos, fill="purple")) +
geom_line() +
geom_line(data = jm_vd_datepost, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p <- ggplot(data = jm_vd_date, aes(x=date, y=pos, fill="purple")) +
geom_line() +
geom_line(data = jm_vd_datepost, color="#69b3a2") +
xlab("date") +
scale_x_date(labels=date_format ("%b %y")) +
theme(axis.text.x=element_text(angle=60, hjust=1))
p
